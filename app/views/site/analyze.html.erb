<%#= turbo_page_requires_reload %>
<%#= turbo_frame_tag 'analyze_form' do %>

<div class="m-1 text-lg">
  <% flash.each do |type, msg| %>
    <div class="text-lg font-bold bg-pink-300">
      <%= msg %>
    </div>
  <% end %>
</div>


<div data-controller="chart"
     data-chart-prices-value="<%= @price_data.to_json %>"
     data-chart-volume-value="<%= @volume_data.to_json %>"
     data-chart-points-value="<%= @points_data.to_json %>"
     data-chart-future-value="<%= @future_sentiment.to_json %>"
     data-chart-sentiment-value="<%= @sentiment.to_json %>"
     data-chart-symbol-value="<%= @symbol %>">


  <div class="flex flex-row flex-wrap justify-center items-center bg-gray-50 p-2 rounded-lg shadow-lg m-1 bg-indigo-300">
    <div>
      <%= render "site/stock_form" %>
    </div>

    <div class="grow-0 ml-2">
      <button data-action="click->chart#show" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
        Chart It!
      </button>
    </div>
  </div>
    <div data-chart-target="sentiment" class="flex flex-row items-center grow box-border shadow bg-amber-100 mt-1 p-2 rounded ml-5 mr-5 mb-1">
    </div>
  </div>

  <div id="stock-chart" class="bg-gray-50 mt-45" >
  </div>

  <div id="chart-candlestick" class="bg-amber-300" style="<%= @stock_graph_style %>">
  </div>

  <div id="chart-bar" class="bg-amber-800" style="<%= @stock_graph_style %>">
  </div>
</div>

<%# end %>
